
process DQM = { 

	include "FWCore/MessageLogger/data/MessageLogger.cfi"
	include "DQM/HcalMonitorModule/data/hcal_dqm_monitor.cfi"

	path p = { hcalDigis, hcalMonitor , hcalClient}

	untracked PSet options = {
		untracked vstring Rethrow = { "ProductNotFound", "TooManyProducts", "TooFewProducts" }
	}
	untracked PSet maxEvents = {untracked int32 input = -1 }

#      source = NewEventStreamFileReader{
#	      untracked vstring fileNames = {
#      'file:/data1/lookarea/GlobalAug07.00017123.0012.B.storageManager.0.0000.dat'
#
#	      }   
#	      int32 max_event_size = 7000000
#	      int32 max_queue_depth = 5
#      }

      source = EventStreamHttpReader {
        string sourceURL = "http://cmsdisk1.cms:48500/urn:xdaq-application:service=storagemanager"
        int32 max_event_size = 7000000
        int32 max_queue_depth = 5
        untracked string consumerName = "HCAL DQM Consumer"
        untracked string consumerPriority = "normal"
        untracked int32 headerRetryInterval = 3
        untracked double maxEventRequestRate = 10
        untracked PSet SelectEvents = { vstring SelectEvents={"*"} }
      }
	

	es_module = HcalDbProducer {}
	es_source es_hardcode = HcalHardcodeCalibrations { untracked vstring toGet = {"Pedestals", "PedestalWidths", "Gains", "GainWidths", "QIEShape", "QIEData", "ChannelQuality"}}
	es_source es_ascii = HcalTextCalibrations { 
		VPSet input = {
                              {string object = "ElectronicsMap" FileInPath file = "DQM/HcalMonitorModule/data/official_emap_14x.txt"
                                                }
                }
	}

	service = DaqMonitorROOTBackEnd{}
	
	service = MonitorDaemon{
	       #	 if true, will automatically start DQM thread in background
	       #  (default: false)
	       untracked bool AutoInstantiate = true

	       # if >=0, upon a connection problem, the source will automatically 
	       # attempt to reconnect with a time delay (secs) specified here 
	       # (default: 5)
	       untracked int32 reconnect_delay = 5
               # maximum # of reconnection attempts upon connection problems (default: 10)
               untracked int32 maxAttempts2Reconnect	= 10

	       # collector hostname
       	       # (default: localhost)
               untracked string DestinationAddress = "srv-c2d05-19"

               # port for communicating with collector
               # (default: 9090)
               untracked int32 SendPort = 9090

               # monitoring period in ms (i.e. how often monitoring elements 
               # are shipped to the collector
               # (default: 1000)
               untracked int32 UpdateDelay = 10

               # name of DQM source
               # (default: DQMSource)
               untracked string NameAsSource = "Hcal"
	}

	service = DQMShipMonitoring{
		// event-period for shipping monitoring to collector (default: 25)
		untracked uint32 period = 50
	}

      module hcalClient =  HcalMonitorClient{
       untracked string clientName = 'Hcal'
        untracked bool runningStandalone = true
        untracked int32 diagnosticPrescale = 10

//        untracked string hostName = 'rubus2d16-12'
        untracked string hostName = 'srv-C2D05-19'
        untracked int32  hostPort = 9090
//        untracked string outputFile = '/data1/dropbox/Playback_DQM_Hcal_Dt_Dttf.root'
        untracked string outputFile = 'DQM_Hcal.root'
        untracked string baseHtmlDir = ''
        untracked string processName = ''

        untracked bool enableSubRun = false
        untracked bool collateSources = false
        untracked bool cloneME = false
        untracked bool enableExit = false
        untracked bool verbose = true

        untracked int32 resetFreqUpdates = -1
        untracked int32 resetFreqEvents = -1
        untracked int32 resetFreqTime = -1
        untracked int32 updateFrequency = 100
        untracked int32 outputFreqEvts = 999
        untracked int32 Timeout = 100

        untracked bool TestBeamClient =  false
        untracked bool DataFormatClient = false
        untracked bool DigiClient = false
        untracked bool RecHitClient = false
        untracked bool HotCellClient = false

        untracked bool LEDClient = true
        untracked double LEDRMS_ErrThresh = 0.8
        untracked double LEDMEAN_ErrThresh = 2.25

        untracked bool PedestalClient = true
        untracked bool plotPedRAW = false
        untracked double PedestalRMS_ErrThresh = 1
        untracked double PedestalMean_ErrThresh = 2
        untracked double CapIdRMS_ErrThresh = 0.25
        untracked double CapIdMEAN_ErrThresh = 1.5

        untracked bool DoPerChanTests = true
        untracked vstring subDetsOn = {'HF'}
      }


}
